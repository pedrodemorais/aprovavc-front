<div class="container">

<section class="dashboard-revisao-page">

  <!-- CABE√áALHO / RESUMO -->
  <div class="rev-header">
    <div class="rev-header-main">
      <h1 class="rev-title">Controle de revis√µes</h1>
      <p class="rev-subtitle">
        Acompanhe o que est√° vencido, o que √© para hoje e o que j√° est√° agendado.
      </p>
    </div>

    <div class="rev-summary-grid" *ngIf="revisoes.length">
      <div class="rev-summary-card vencidas">
        <span class="rev-summary-label">Vencidas</span>
        <span class="rev-summary-value">{{ totalVencidas }}</span>
      </div>

      <div class="rev-summary-card hoje">
        <span class="rev-summary-label">Para hoje</span>
        <span class="rev-summary-value">{{ totalHoje }}</span>
      </div>

      <div class="rev-summary-card futuras">
        <span class="rev-summary-label">Futuras</span>
        <span class="rev-summary-value">{{ totalFuturas }}</span>
      </div>
    </div>
  </div>

  <!-- ESTADOS GERAIS -->
  <div class="rev-state" *ngIf="carregando">
    Carregando revis√µes...
  </div>

  <div class="rev-state erro" *ngIf="erro">
    {{ erro }}
  </div>

  <div class="rev-state ok" *ngIf="!carregando && !revisoes.length && !erro">
    Nenhuma revis√£o pendente por enquanto. üéâ
  </div>

  <!-- LISTA PRINCIPAL -->
  <div class="rev-card" *ngIf="revisoes.length">

    <!-- cabe√ßalho tipo "tabela" -->
    <div class="rev-list-header">
      <span class="col-status">Status</span>
      <span class="col-materia">Mat√©ria / t√≥pico</span>
      <span class="col-tipo">Tipo</span>
      <span class="col-data">Pr√≥xima revis√£o</span>
      <span class="col-acoes"></span>
    </div>

    <!-- linhas -->
    <div
      class="rev-list-row"
      *ngFor="let r of revisoes"
    >
      <!-- STATUS -->
      <div class="col-status">
        <span
          class="pill-status"
          [ngClass]="{
            'status-vencida': r.status === 'VENCIDA',
            'status-hoje':   r.status === 'EM_DIA',
            'status-futura': r.status === 'FUTURA'
          }"
        >
          {{
            r.status === 'VENCIDA'
              ? 'Vencida'
              : r.status === 'EM_DIA'
                ? 'Hoje'
                : 'Futura'
          }}
        </span>
      </div>

      <!-- MAT√âRIA / T√ìPICO -->
      <div class="col-materia">
        <div class="materia-nome">{{ r.materiaNome }}</div>
        <div class="topico-descricao">T√≥pico: {{ r.topicoDescricao }}</div>
      </div>

      <!-- TIPO -->
      <div class="col-tipo">
        <span
          class="pill-tipo"
          [ngClass]="r.tipo === 'ANOTACAO' ? 'pill-anotacao' : 'pill-flashcard'"
        >
          {{ r.tipo === 'ANOTACAO' ? 'Anota√ß√µes' : 'Flashcards' }}
        </span>
      </div>

      <!-- DATA / QUANTIDADE -->
      <div class="col-data">
        <div class="data-principal">
          {{ r.dataProximaRevisao | date: 'shortDate' }}
        </div>
        <div class="data-secundaria" *ngIf="r.qtdPendentes">
          {{ r.qtdPendentes }} itens pendentes
        </div>
      </div>

      <!-- A√á√ïES -->
      <div class="col-acoes">
        <button
          type="button"
          class="btn-ghost"
          (click)="irParaSala(r)"
        >
          Ir para sala de estudo
        </button>
      </div>
    </div>

  </div>
</section>
</div>